<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <link rel="stylesheet" href="/stylesheets/body.css">
    <link rel="stylesheet" href="/stylesheets/crossing.css">
    <!-- Knihovna  --> 

    <style>
       /* Style the container to control layout */
.canvas-container {
    width: 50px; /* Or set a specific width, like '400px' */
    max-width: 20px; /* Prevents the container from growing too large */
    height: 50px; /* Maintain aspect ratio */
    margin: 0 auto; /* Center align */
    position: relative; /* Ensure proper stacking with other elements */
    border: 1px solid #ccc;
    background-color: #f9f9f9;
    padding: 10px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

/* Make the canvas responsive */
.canvas1 {
    width: 50%; /* Canvas takes full width of the container */
    height: auto; /* Maintain aspect ratio */
    display: block; /* Avoid inline-block spaces */
    border: 1px solid #000; /* Optional border for visibility */
    border-radius: 5px; /* Rounded corners */
} 

.canvas2 {
    width: 100px; /* Canvas takes full width of the container */
    height: 100px; /* Maintain aspect ratio */
    display: block; /* Avoid inline-block spaces */
    border: 1px solid #000; /* Optional border for visibility */
    border-radius: 5px; /* Rounded corners */
    margin-bottom: 1em;
}

h1 {
            text-align: center;
            color: #333;
        }
        table {
            width: 100%;
            max-width: 800px;
            margin: 20px auto;
            border-collapse: collapse;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            background-color: #fff;
        }
        th, td {
            border: 1px solid #ddd;
            text-align: center;
            padding: 10px;
            font-size: 16px;
        }
        th {
            background-color: #f4f4f4;
            font-weight: bold;
        }
        td {
            color: #555;
        }
        tr:nth-child(even) td {
            background-color: #f9f9f9;
        }
    </style>

    <title>Crossing</title>
</head>
<body>
    <div>
        <%- include('../views/navbar.ejs') %>
    </div>
<!-- https://medium.com/@laners.org/how-to-add-a-color-picker-in-html-ebd55e419b16 -->

    <div class="select-krizeni">
        <label>Vyberte typ křížení</label>
        <select name="krizeniSelect" id="krizeniSelect" onchange="showContent()">
            <option value="" disabled selected hidden>Vybrat krížení</option>
            <option value="neuplnaDominance">Neúplná dominance</option>
            <option value="uplnaDominance">Úplná dominance</option>
            <option value="kodokinance">Kodominace</option>
        </select>
    </div>

<div class="body-crossing" id="uplnaDominance">
    <div class="menu-container">
        <div class="vertical-div">
            <div class="horizontal-div">
                <div class="subjekt">
                    <h1>Subjekt 1</h1>
                    <div class="vertical-div">
                        <div class="horizontal-div">
                            <h2>Alely: AaBb</h2>
                            <!-- <h3>Znak pro barvu X</h3> -->
                            <!-- <h>AaBb</h3> -->
                        </div>
                        <div class="horizontal-div">
                            <h3><b>Aa</b> ..... Znak pro barvu X</h3>

                            <!-- <h>AaBb</h3> -->
                        </div>
                        <div class="horizontal-div">
                            <h3><b>Bb</b> ..... Znak pro tvar X</h3>

                            <!-- <h>AaBb</h3> -->
                        </div>
                        
                        <div class="horizontal-div">
                            <h3>Zvolte barvu X</h3>
                            <input type="color" id="colorPicker1" name="colorPicker1" value="#FF0000">
                        </div>
                        <div class="horizontal-div">
                            <h3>Navolte počet vrcholů</h3>
                            <input type="number" style="width: 30px; height: 30px;" id="input1">
                        </div>
                        <div class="vertical-div">
                            <button class="button-generujTvar" onclick="generuj()">Generuj tvar</button>
                            <canvas class="canvas1" id="canvas1" width="400" height="400"></canvas>
                        </div>
                    </div>
                </div>
                <div class="subjket">   
                    <h1>Subjekt 2</h1>
                    <div class="vertical-div">
                        <div class="horizontal-div">
                            <h2>Alely: AaBb</h2>
                            <!-- <h3>Znak pro barvu X</h3> -->
                            <!-- <h>AaBb</h3> -->
                        </div>
                        <div class="horizontal-div">
                            <h3><b>Aa</b> ..... Znak pro barvu Y</h3>

                            <!-- <h>AaBb</h3> -->
                        </div>
                        <div class="horizontal-div">
                            <h3><b>Bb</b> ..... Znak pro tvar Y</h3>

                            <!-- <h>AaBb</h3> -->
                        </div>
                        <!-- <div class="horizontal-div">
                            <h3>Znak, které pozorujeme ... AaBb</h3>
                        </div> -->
                        <div class="horizontal-div">
                            <h3>Zvolte barvu Y</h3>
                            <input type="color" id="colorPicker2" name="colorPicker2" value="#0000FF"  >
                        </div>
                        <div class="horizontal-div">
                            <h3>Navolte počet vrcholů</h3>
                            <input type="number" style="width: 30px; height: 30px;" id="input2">
                        </div>
                        <div class="vertical-div">
                            <button class="button-generujTvar" onclick="generuj()">Generuj tvar</button>
                            <canvas class="canvas1" id="canvas2" width="400" height="400"></canvas>
                        </div>
                    </div>
                </div>  
            </div>

            <div style="text-align: center; width: 100%;">
                <button class="button-krizeni" onclick="kriz()">Křížit</button>
            </div>
        </div>
    </div>



    <div class="menu-container">
        <h1>Výsledný subjekt</h1>
        <br>
        <p style="text-align: center;"><b>Fenotypový poměr:</b> 9:3:3:1</p>
        <br>
        <p style="text-align: center;">9 : dominantní pro oba znaky (A_B_) <br>
            3 : dominantní pro první znak, recesivní pro druhý (A_bb) <br>
            3 : recesivní pro první znak, dominantní pro druhý (aaB_) <br>
            1 : recesivní pro oba znaky (aabb)</p>
        <div class="horizontal-div">
            <h1>9x</h1>
            <canvas class="canvas2" id="canvas3" width="400" height="400"></canvas>
            <h1>3x</h1>
            <canvas class="canvas2" id="canvas4" width="400" height="400"></canvas>
            <h1>3x</h1>
            <canvas class="canvas2" id="canvas5" width="400" height="400"></canvas> 
            <h1>1x</h1>
            <canvas class="canvas2" id="canvas6" width="400" height="400"></canvas> 
        </div>
    </div>
</div>

    
<!-- VERZE DVE neuplnaDominance -->
<div class="body-crossing" id="neuplnaDominance" style="display: none;">
    <div class="menu-container">
        <div class="vertical-div">
            <div class="horizontal-div" style="gap: 150px;">
                <div class="subjekt">
                    <h1>Subjekt 1</h1>
                    <div class="vertical-div">
                        <div class="horizontal-div">
                            <h2>Alely: AaBb</h2>
                            <!-- <h3>Znak pro barvu X</h3> -->
                            <!-- <h>AaBb</h3> -->
                        </div>
                        <div class="horizontal-div">
                            <h3><b>Aa</b> ..... Znak pro barvu X</h3>

                            <!-- <h>AaBb</h3> -->
                        </div>
                        <div class="horizontal-div">
                            <h3><b>Bb</b> ..... Znak pro tvar X</h3>

                            <!-- <h>AaBb</h3> -->
                        </div>
                    </div>
                </div>
                <div class="subjket">   
                    <h1>Subjekt 2</h1>
                    <div class="vertical-div">
                        <div class="horizontal-div">
                            <h2>Alely: AaBb</h2>
                            <!-- <h3>Znak pro barvu X</h3> -->
                            <!-- <h>AaBb</h3> -->
                        </div>
                        <div class="horizontal-div">
                            <h3><b>Aa</b> ..... Znak pro barvu Y</h3>

                            <!-- <h>AaBb</h3> -->
                        </div>
                        <div class="horizontal-div">
                            <h3 style="margin-bottom: 2em;"><b>Bb</b> ..... Znak pro tvar Y</h3>
                        </div>
                    </div>
                </div>  
            </div>
        </div>
    </div>

    <div class="menu-container">
        <div class="vertical-div">
            <div class="horizontal-div">
                <div class="subjekt">
                    <h1>Subjekt 1</h1>
                    <div class="vertical-div">  
                        <div class="horizontal-div">
                            <h3>Zvolte barvu X</h3>
                            <input type="color" id="colorPicker1" name="colorPicker1" value="#FF0000">
                        </div>
                        <div class="horizontal-div">
                            <h3>Navolte počet vrcholů</h3>
                            <input type="number" style="width: 30px; height: 30px;" id="input1">
                        </div>
                        <div class="vertical-div">
                            <button class="button-generujTvar" onclick="generuj()">Generuj tvar</button>
                            <canvas class="canvas1" id="canvas11" width="400" height="400"></canvas>
                        </div>
                    </div>
                </div>
                <div class="subjket">   
                    <h1>Subjekt 2</h1>
                    <div class="vertical-div">
                        <div class="horizontal-div">
                            <h3>Zvolte barvu Y</h3>
                            <input type="color" id="colorPicker2" name="colorPicker2" value="#0000FF"  >
                        </div>
                        <div class="horizontal-div">
                            <h3>Navolte počet vrcholů</h3>
                            <input type="number" style="width: 30px; height: 30px;" id="input2">
                        </div>
                        <div class="vertical-div">
                            <button class="button-generujTvar" onclick="generuj()">Generuj tvar</button>
                            <canvas class="canvas1" id="canvas22" width="400" height="400"></canvas>
                        </div>
                    </div>
                </div>  
            </div>

            <div style="text-align: center; width: 100%;">
                <button class="button-krizeni" onclick="kriz()">Křížit</button>
            </div>
        </div>
    </div><!-- <div class="select-krizeni">
        <label>Vyberte typ křížení</label>
        <select name="krizeniSelect" id="krizeniSelect" >
            <option value="" disabled selected hidden>Vybrat krížení</option>
            <option value="neuplnaDominance">Neúplná dominance</option>
            <option value="uplnaDominance">Úplná dominance</option>
            <option value="kodokinance">Kodominace</option>
        </select>
    </div> -->
    <div class="menu-container">
        <h1>Výsledný subjekt</h1>
        <br>
        <p style="text-align: center;"><b>Fenotypový poměr:</b> 9:3:3:1</p>
        <br>
        <p style="text-align: center;">9 : dominantní pro oba znaky (A_B_) <br>
            3 : dominantní pro první znak, recesivní pro druhý (A_bb) <br>
            3 : recesivní pro první znak, dominantní pro druhý (aaB_) <br>
            1 : recesivní pro oba znaky (aabb)</p>
        <div class="horizontal-div">
            <h1>9x</h1>
            <canvas class="canvas2" id="canvas3" width="400" height="400"></canvas>
            <h1>3x</h1>
            <canvas class="canvas2" id="canvas4" width="400" height="400"></canvas>
            <h1>3x</h1>
            <canvas class="canvas2" id="canvas5" width="400" height="400"></canvas> 
            <h1>1x</h1>
            <canvas class="canvas2" id="canvas6" width="400" height="400"></canvas> 
        </div>
    </div>
    </div>

</div>
    <div style="height: 800px;"></div>

    <div>
        <%- include('../views/footer.ejs') %>
    </div>

    <script>
    function drawPolygon(context, x, y, radius, sides) {
        const angleStep = (2 * Math.PI) / sides;
        context.beginPath();
        for (let i = 0; i < sides; i++) {
            const angle = i * angleStep;
            const xPos = x + radius * Math.cos(angle);
            const yPos = y + radius * Math.sin(angle);
            context.lineTo(xPos, yPos);
        }
        context.closePath();
        context.stroke();
        
    }
   

        // Function to convert HEX to RGB
function hexToRgb(hex) {
  hex = hex.replace('#', '');
  const r = parseInt(hex.substring(0, 2), 16);
  const g = parseInt(hex.substring(2, 4), 16);
  const b = parseInt(hex.substring(4, 6), 16);
  return { r, g, b };
}

// Function to convert RGB to HEX
function rgbToHex(r, g, b) {
  return (
    '#' +
    [r, g, b]
      .map((value) => value.toString(16).padStart(2, '0'))
      .join('')
      .toUpperCase()
  );
}

// Function to mix two colors
function mixColors(color1, color2) {
  const rgb1 = hexToRgb(color1);
  const rgb2 = hexToRgb(color2);

  const r = Math.round((rgb1.r + rgb2.r) / 2);
  const g = Math.round((rgb1.g + rgb2.g) / 2);
  const b = Math.round((rgb1.b + rgb2.b) / 2);

  return rgbToHex(r, g, b);
}
   

    function generuj(){
        // Nacte jaky n uhlenik ma vytvorit
        var N_Uhelnik1 = parseInt(document.getElementById('input1').value);
        var N_Uhelnik2= parseInt(document.getElementById('input2').value);

        //vymaze to co je v canvasu
        const canvas1 = document.getElementById('canvas1');
        const ctx1 = canvas1.getContext('2d');
        ctx1.clearRect(0, 0, canvas1.width, canvas1.height);

        const canvas2 = document.getElementById('canvas2');
        const ctx2 = canvas2.getContext('2d');
        ctx2.clearRect(0, 0, canvas2.width, canvas2.height);


        const colorPicker1 = document.getElementById('colorPicker1');
        const colorPicker2 = document.getElementById('colorPicker2');

        const selectedColor1 = colorPicker1.value;
        const selectedColor2 = colorPicker2.value;

        drawPolygon(ctx1, 200, 200, 100, N_Uhelnik1); // Nakreslí n-úhelník
        ctx1.fillStyle = selectedColor1;
        ctx1.fill();

        drawPolygon(ctx2, 200, 200, 100, N_Uhelnik2); // Nakreslí n-úhelník
        ctx2.fillStyle = selectedColor2;
        ctx2.fill();
    }

    function kriz() {
        const colorPicker1 = document.getElementById('colorPicker1');
        const colorPicker2 = document.getElementById('colorPicker2');

        const selectedColor1 = colorPicker1.value;
        const selectedColor2 = colorPicker2.value;

        var N_Uhelnik1 = parseInt(document.getElementById('input1').value);
        var N_Uhelnik2= parseInt(document.getElementById('input2').value);

        var X = (N_Uhelnik1+N_Uhelnik2)/2;
        console.log(X);

        const canvas3 = document.getElementById('canvas3');
        const ctx3 = canvas3.getContext('2d');
        ctx3.clearRect(0, 0, canvas3.width, canvas3.height);

        
        const canvas4 = document.getElementById('canvas4');
        const ctx4 = canvas4.getContext('2d');
        ctx4.clearRect(0, 0, canvas4.width, canvas4.height);

        const canvas5 = document.getElementById('canvas5');
        const ctx5 = canvas5.getContext('2d');
        ctx5.clearRect(0, 0, canvas5.width, canvas5.height);

        const canvas6 = document.getElementById('canvas6');
        const ctx6 = canvas6.getContext('2d');
        ctx6.clearRect(0, 0, canvas6.width, canvas6.height);


        //smichani barvy 

        const color1 = '#FF0000'; // Red
        const color2 = '#0000FF'; // Blue
        const mixedColor = mixColors(selectedColor1, selectedColor2);

        console.log('Mixed Color:', mixedColor); // Output: Mixed Color: #800080 (Purple)
        //prvni 9
        drawPolygon(ctx3, 200, 200, 100, N_Uhelnik1); // Nakreslí n-úhelník
        ctx3.fillStyle = selectedColor1;
        ctx3.fill();
        // pak 3
        drawPolygon(ctx4, 200, 200, 100, N_Uhelnik1); // Nakreslí n-úhelník
        ctx4.fillStyle = selectedColor2;
        ctx4.fill();
        //pak 3
        drawPolygon(ctx5, 200, 200, 100, N_Uhelnik2); // Nakreslí n-úhelník
        ctx5.fillStyle = selectedColor1;
        ctx5.fill();

        //pak 1
        drawPolygon(ctx6, 200, 200, 100, N_Uhelnik2); // Nakreslí n-úhelník
        ctx6.fillStyle = selectedColor2;
        ctx6.fill();

    }


// Example usage
function showContent() {
    // Hide all content divs
    var contents = document.querySelectorAll('.body-crossing');
    contents.forEach(function(content) {
      content.style.display = 'none';
    });

    // Get the selected option value
    var selectedOption = document.getElementById('krizeniSelect').value;

    // Show the corresponding content div if selected
    if (selectedOption) {
      document.getElementById(selectedOption).style.display = 'flex';
    }
  } 

  

    </script>
    
    <!-- <script src="javascripts/crossing.js"></script> -->
</body>
</html>